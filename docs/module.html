<!DOCTYPE html>

<html>
<head>
  <title>Semantic Modules</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="modal.html">
                  modal.js
                </a>
              
                
                <a class="source" href="module.html">
                  module.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <h1 id="semantic-modules">Semantic Modules</h1>
<p>This is a design pattern for creating UI modules in Semantic</p>
<p>Semantic is unique in that all arbitrary data is a setting. Semantic modules also are self documenting, with module.debug calls serving to explain state, and log performance data.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/*
 * # Semantic UI - Module
 * http://github.com/quirkyinc/semantic
 *
 *
 * Copyright 2015 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 */</span>

;(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">( $, window, document, undefined )</span> </span>{

$.fn.example = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(parameters)</span> </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <h2 id="group">Group</h2>
<p>Some properties remain constant across all instances of a module.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span></pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>Store a reference to the module group, this can be useful to refer to other modules inside each module</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    $allModules     = $(<span class="hljs-keyword">this</span>),</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>store references to elements that are consistent across all instances</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    $<span class="hljs-built_in">document</span>       = $(<span class="hljs-built_in">document</span>),</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Preserve selector from outside each scope and mark current time for performance tracking</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    moduleSelector  = $allModules.selector || <span class="hljs-string">''</span>,

    time            = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime(),
    performance     = [],</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Preserve original arguments to determine if a method is being invoked</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    query           = <span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>],
    methodInvoked   = (<span class="hljs-keyword">typeof</span> query == <span class="hljs-string">'string'</span>),
    queryArguments  = [].slice.call(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">1</span>),
    returnedValue
  ;</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <h2 id="singular">Singular</h2>
<p>Iterate over all elements to initialize module</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $allModules
    .each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
      <span class="hljs-keyword">var</span></pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Extend settings to merge run-time settings with defaults</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        settings        = ( $.isPlainObject(parameters) )
          ? $.extend(<span class="hljs-literal">true</span>, {}, $.fn.example.settings, parameters)
          : $.extend({}, $.fn.example.settings),</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>Alias settings object for convenience and performance</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        namespace      = settings.namespace,
        error          = settings.error,
        className      = settings.className,</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>You may also find it useful to alias your own settings</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        text           = settings.text,</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>Define namespaces for storing module instance and binding events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        eventNamespace  = <span class="hljs-string">'.'</span> + namespace,
        moduleNamespace = <span class="hljs-string">'module-'</span> + namespace,</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>Instance is stored and retreived in namespaced DOM metadata</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        instance        = $(<span class="hljs-keyword">this</span>).data(moduleNamespace),
        element         = <span class="hljs-keyword">this</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>Cache selectors using selector settings object for access inside instance of module</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        $<span class="hljs-built_in">module</span>        = $(<span class="hljs-keyword">this</span>),
        $text          = $<span class="hljs-built_in">module</span>.find(settings.selector.text),</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>Define private variables which can be used to maintain internal state, these cannot be changed from outside the module closure so use conservatively. Default values are set using <code>a || b</code> syntax</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        observer,
        <span class="hljs-built_in">module</span>
      ;</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <h2 id="module-behavior">Module Behavior</h2>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-built_in">module</span> = {</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <h3 id="required">Required</h3>

            </div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <h4 id="initialize">Initialize</h4>
<p>Initialize attaches events and preserves each instance in html metadata</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        initialize: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
          <span class="hljs-built_in">module</span>.debug(<span class="hljs-string">'Initializing module for'</span>, element);
          <span class="hljs-built_in">module</span>.bind.events();
          <span class="hljs-built_in">module</span>.instantiate();
        },

        instantiate: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
          <span class="hljs-built_in">module</span>.verbose(<span class="hljs-string">'Storing instance of module'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>The instance is just a copy of the module definition, we store it in metadata so we can use it outside of scope, but also define it for immediate use</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          instance = <span class="hljs-built_in">module</span>;
          $<span class="hljs-built_in">module</span>
            .data(moduleNamespace, instance)
          ;
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <h3 id="observe-changes">Observe Changes</h3>
<p>This is a common pattern used to watch for changes to an element using <a href="https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver">DOM Mutation Observers</a>
This allows you recalculate cached values, or update the selector cache when sub-elements of a module change</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        observeChanges: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
          <span class="hljs-keyword">if</span>(<span class="hljs-string">'MutationObserver'</span> <span class="hljs-keyword">in</span> <span class="hljs-built_in">window</span>) {
            observer = <span class="hljs-keyword">new</span> MutationObserver(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(mutations)</span> </span>{
              <span class="hljs-built_in">module</span>.debug(<span class="hljs-string">'Element updated refreshing selectors'</span>);
              <span class="hljs-built_in">module</span>.refresh();
            });
            observer.observe(element, {
              childList : <span class="hljs-literal">true</span>,
              subtree   : <span class="hljs-literal">true</span>
            });
            <span class="hljs-built_in">module</span>.debug(<span class="hljs-string">'Setting up mutation observer'</span>, observer);
          }
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <h4 id="destroy">Destroy</h4>
<p>Removes all events and the instance copy from metadata</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        destroy: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
          <span class="hljs-built_in">module</span>.verbose(<span class="hljs-string">'Destroying previous module for'</span>, element);
          $<span class="hljs-built_in">module</span>
            .removeData(moduleNamespace)
            .off(eventNamespace)
          ;
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <h4 id="refresh">Refresh</h4>
<p>Selectors or cached values sometimes need to refreshed</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        refresh: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
          <span class="hljs-built_in">module</span>.verbose(<span class="hljs-string">'Refreshing elements'</span>, element);
          $<span class="hljs-built_in">module</span> = $(element);
          $text   = $(<span class="hljs-keyword">this</span>).find(settings.selector.text);
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <h3 id="bind-events">Bind events</h3>
<p>Bind events to element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        bind: {
          events: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
            $<span class="hljs-built_in">module</span>
              .on(<span class="hljs-string">'click'</span> + eventNamespace, <span class="hljs-built_in">module</span>.exampleBehavior)
            ;
          }
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <h3 id="custom">Custom</h3>
<h4 id="by-event">By Event</h4>
<p>Sometimes it makes sense to call an event handler by its type if it is dependent on the event to behave properly</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        event: {
          click: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> </span>{
            <span class="hljs-built_in">module</span>.verbose(<span class="hljs-string">'Preventing default action'</span>);
            <span class="hljs-keyword">if</span>( !$<span class="hljs-built_in">module</span>.hasClass(className.disabled) ) {
              <span class="hljs-built_in">module</span>.behavior();
            }
            event.preventDefault();
          }
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <h4 id="by-function">By Function</h4>
<p>Other times events make more sense for methods to be called by their function if it is ambivalent to how it is invoked</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        behavior: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
          <span class="hljs-built_in">module</span>.debug(<span class="hljs-string">'Changing the text to a new value'</span>, text);
          <span class="hljs-keyword">if</span>( !<span class="hljs-built_in">module</span>.has.text() ) {
            <span class="hljs-built_in">module</span>.set.text( text);
          }
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <h4 id="behaviors">Behaviors</h4>
<p>Custom methods should be defined with consistent word usage, some useful terms: “has”, “set”, “get”, “change”, “add”, “remove”
Make sure method names read in sentence order, “set text” not “text set”</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        has: {
          text: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(state)</span> </span>{
            <span class="hljs-built_in">module</span>.verbose(<span class="hljs-string">'Checking whether text state exists'</span>, state);
            <span class="hljs-keyword">if</span>( text[state] === <span class="hljs-literal">undefined</span> ) {
              <span class="hljs-built_in">module</span>.error(error.noText);
              <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
          }
        },

        set: {
          text: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(state)</span> </span>{
            <span class="hljs-built_in">module</span>.verbose(<span class="hljs-string">'Setting text to new state'</span>, state);
            <span class="hljs-keyword">if</span>( <span class="hljs-built_in">module</span>.has.text(state) ) {
              $text
                .text( text[state] )
              ;
              settings.onChange();
            }
          }
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <h3 id="standard">Standard</h3>

            </div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <h4 id="setting">Setting</h4>
<p>Module settings can be read or set using this method</p>
<p>Settings can either be specified by modifying the module defaults, by initializing the module with a settings object, or by changing a setting by invoking this method
<code>$(.foo&#39;).example(&#39;setting&#39;, &#39;moduleName&#39;);</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        setting: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(name, value)</span> </span>{
          <span class="hljs-built_in">module</span>.debug(<span class="hljs-string">'Changing setting'</span>, name, value);
          <span class="hljs-keyword">if</span>( $.isPlainObject(name) ) {
            $.extend(<span class="hljs-literal">true</span>, settings, name);
          }
          <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(value !== <span class="hljs-literal">undefined</span>) {
            settings[name] = value;
          }
          <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> settings[name];
          }
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <h4 id="internal">Internal</h4>
<p>Module internals can be set or retrieved as well
<code>$(.foo&#39;).example(&#39;internal&#39;, &#39;behavior&#39;, function() { // do something });</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        internal: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(name, value)</span> </span>{
          <span class="hljs-keyword">if</span>( $.isPlainObject(name) ) {
            $.extend(<span class="hljs-literal">true</span>, <span class="hljs-built_in">module</span>, name);
          }
          <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(value !== <span class="hljs-literal">undefined</span>) {
            <span class="hljs-built_in">module</span>[name] = value;
          }
          <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">module</span>[name];
          }
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <h4 id="debug">Debug</h4>
<p>Debug pushes arguments to the console formatted as a debug statement</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        debug: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
          <span class="hljs-keyword">if</span>(settings.debug) {
            <span class="hljs-keyword">if</span>(settings.performance) {
              <span class="hljs-built_in">module</span>.performance.log(<span class="hljs-built_in">arguments</span>);
            }
            <span class="hljs-keyword">else</span> {
              <span class="hljs-built_in">module</span>.debug = <span class="hljs-built_in">Function</span>.prototype.bind.call(<span class="hljs-built_in">console</span>.info, <span class="hljs-built_in">console</span>, settings.name + <span class="hljs-string">':'</span>);
              <span class="hljs-built_in">module</span>.debug.apply(<span class="hljs-built_in">console</span>, <span class="hljs-built_in">arguments</span>);
            }
          }
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <h4 id="verbose">Verbose</h4>
<p>Calling verbose internally allows for additional data to be logged which can assist in debugging</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        verbose: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
          <span class="hljs-keyword">if</span>(settings.verbose &amp;&amp; settings.debug) {
            <span class="hljs-keyword">if</span>(settings.performance) {
              <span class="hljs-built_in">module</span>.performance.log(<span class="hljs-built_in">arguments</span>);
            }
            <span class="hljs-keyword">else</span> {
              <span class="hljs-built_in">module</span>.verbose = <span class="hljs-built_in">Function</span>.prototype.bind.call(<span class="hljs-built_in">console</span>.info, <span class="hljs-built_in">console</span>, settings.name + <span class="hljs-string">':'</span>);
              <span class="hljs-built_in">module</span>.verbose.apply(<span class="hljs-built_in">console</span>, <span class="hljs-built_in">arguments</span>);
            }
          }
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <h4 id="error">Error</h4>
<p>Error allows for the module to report named error messages, it may be useful to modify this to push error messages to the user. Error messages are defined in the modules settings object.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        error: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
          <span class="hljs-built_in">module</span>.error = <span class="hljs-built_in">Function</span>.prototype.bind.call(<span class="hljs-built_in">console</span>.error, <span class="hljs-built_in">console</span>, settings.name + <span class="hljs-string">':'</span>);
          <span class="hljs-built_in">module</span>.error.apply(<span class="hljs-built_in">console</span>, <span class="hljs-built_in">arguments</span>);
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <h4 id="performance">Performance</h4>
<p>This is called on each debug statement and logs the time since the last debug statement.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>performance: {
          log: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(message)</span> </span>{
            <span class="hljs-keyword">var</span>
              currentTime,
              executionTime,
              previousTime
            ;
            <span class="hljs-keyword">if</span>(settings.performance) {
              currentTime   = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime();
              previousTime  = time || currentTime;
              executionTime = currentTime - previousTime;
              time          = currentTime;
              performance.push({
                <span class="hljs-string">'Name'</span>           : message[<span class="hljs-number">0</span>],
                <span class="hljs-string">'Arguments'</span>      : [].slice.call(message, <span class="hljs-number">1</span>) || <span class="hljs-string">''</span>,
                <span class="hljs-string">'Element'</span>        : element,
                <span class="hljs-string">'Execution Time'</span> : executionTime
              });
            }
            clearTimeout(<span class="hljs-built_in">module</span>.performance.timer);
            <span class="hljs-built_in">module</span>.performance.timer = setTimeout(<span class="hljs-built_in">module</span>.performance.display, <span class="hljs-number">500</span>);
          },
          display: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
            <span class="hljs-keyword">var</span>
              title = settings.name + <span class="hljs-string">':'</span>,
              totalTime = <span class="hljs-number">0</span>
            ;
            time = <span class="hljs-literal">false</span>;
            clearTimeout(<span class="hljs-built_in">module</span>.performance.timer);
            $.each(performance, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(index, data)</span> </span>{
              totalTime += data[<span class="hljs-string">'Execution Time'</span>];
            });
            title += <span class="hljs-string">' '</span> + totalTime + <span class="hljs-string">'ms'</span>;
            <span class="hljs-keyword">if</span>(moduleSelector) {
              title += <span class="hljs-string">' \''</span> + moduleSelector + <span class="hljs-string">'\''</span>;
            }
            <span class="hljs-keyword">if</span>( (<span class="hljs-built_in">console</span>.group !== <span class="hljs-literal">undefined</span> || <span class="hljs-built_in">console</span>.table !== <span class="hljs-literal">undefined</span>) &amp;&amp; performance.length &gt; <span class="hljs-number">0</span>) {
              <span class="hljs-built_in">console</span>.groupCollapsed(title);
              <span class="hljs-keyword">if</span>(<span class="hljs-built_in">console</span>.table) {
                <span class="hljs-built_in">console</span>.table(performance);
              }
              <span class="hljs-keyword">else</span> {
                $.each(performance, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(index, data)</span> </span>{
                  <span class="hljs-built_in">console</span>.log(data[<span class="hljs-string">'Name'</span>] + <span class="hljs-string">': '</span> + data[<span class="hljs-string">'Execution Time'</span>]+<span class="hljs-string">'ms'</span>);
                });
              }
              <span class="hljs-built_in">console</span>.groupEnd();
            }
            performance = [];
          }
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <h4 id="invoke">Invoke</h4>
<p>Invoke is used to match internal functions to string lookups.
<code>$(&#39;.foo&#39;).example(&#39;invoke&#39;, &#39;set text&#39;, &#39;Foo&#39;)</code>
Method lookups are lazy, looking for many variations of a search string
For example ‘set text’, will look for both <code>setText : function(){}</code>, <code>set: { text: function(){} }</code>
Invoke attempts to preserve the ‘this’ chaining unless a value is returned.
If multiple values are returned an array of values matching up to the length of the selector is returned</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
        invoke: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(query, passedArguments, context)</span> </span>{
          <span class="hljs-keyword">var</span>
            object = instance,
            maxDepth,
            found,
            response
          ;
          passedArguments = passedArguments || queryArguments;
          context         = element         || context;
          <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> query == <span class="hljs-string">'string'</span> &amp;&amp; object !== <span class="hljs-literal">undefined</span>) {
            query    = query.split(<span class="hljs-regexp">/[\. ]/</span>);
            maxDepth = query.length - <span class="hljs-number">1</span>;
            $.each(query, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(depth, value)</span> </span>{
              <span class="hljs-keyword">var</span> camelCaseValue = (depth != maxDepth)
                ? value + query[depth + <span class="hljs-number">1</span>].charAt(<span class="hljs-number">0</span>).toUpperCase() + query[depth + <span class="hljs-number">1</span>].slice(<span class="hljs-number">1</span>)
                : query
              ;
              <span class="hljs-keyword">if</span>( $.isPlainObject( object[camelCaseValue] ) &amp;&amp; (depth != maxDepth) ) {
                object = object[camelCaseValue];
              }
              <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>( object[camelCaseValue] !== <span class="hljs-literal">undefined</span> ) {
                found = object[camelCaseValue];
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
              }
              <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>( $.isPlainObject( object[value] ) &amp;&amp; (depth != maxDepth) ) {
                object = object[value];
              }
              <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>( object[value] !== <span class="hljs-literal">undefined</span> ) {
                found = object[value];
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
              }
              <span class="hljs-keyword">else</span> {
                <span class="hljs-built_in">module</span>.error(error.method, query);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
              }
            });
          }
          <span class="hljs-keyword">if</span> ( $.isFunction( found ) ) {
            response = found.apply(context, passedArguments);
          }
          <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(found !== <span class="hljs-literal">undefined</span>) {
            response = found;
          }
          <span class="hljs-keyword">if</span>($.isArray(returnedValue)) {
            returnedValue.push(response);
          }
          <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(returnedValue !== <span class="hljs-literal">undefined</span>) {
            returnedValue = [returnedValue, response];
          }
          <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(response !== <span class="hljs-literal">undefined</span>) {
            returnedValue = response;
          }
          <span class="hljs-keyword">return</span> found;
        }
      };</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <h3 id="determining-intent">Determining Intent</h3>

            </div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>This is where the actual action occurs.
    $(‘.foo’).module(‘set text’, ‘Ho hum’);
If you call a module with a string parameter you are most likely trying to invoke a function</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span>(methodInvoked) {</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>Make sure if a method is invoked immediately that it is initialized first</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span>(instance === <span class="hljs-literal">undefined</span>) {
          <span class="hljs-built_in">module</span>.initialize();
        }
        <span class="hljs-built_in">module</span>.invoke(query);
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>if no method call is required we simply initialize the plugin, destroying it if it exists already</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>when re-initializing an element make sure the previous one is torn down first</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span>(instance !== <span class="hljs-literal">undefined</span>) {
          instance.invoke(<span class="hljs-string">'destroy'</span>);
        }
        <span class="hljs-built_in">module</span>.initialize();
      }
    })
  ;
  <span class="hljs-keyword">return</span> (returnedValue !== <span class="hljs-literal">undefined</span>)
    ? returnedValue
    : $allModules
  ;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <h2 id="settings">Settings</h2>
<p>It is necessary to include a settings object which specifies the defaults for your module</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>$.fn.example.settings = {</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <h3 id="required">Required</h3>
<p>Used in debug statements to refer to the module itself</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  name  : <span class="hljs-string">'Example Module'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>Whether debug content should be outputted to console</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  debug       : <span class="hljs-literal">true</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>Whether extra debug content should be outputted</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  verbose     : <span class="hljs-literal">false</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>Whether to track performance data</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  performance : <span class="hljs-literal">false</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>A unique identifier used to namespace events,and preserve the module instance</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  namespace   : <span class="hljs-string">'example'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <h3 id="module-specific">Module Specific</h3>
<p>You may want to include settings specific to your module’s function</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  text: {
    hover : <span class="hljs-string">'You are hovering me now'</span>,
    click : <span class="hljs-string">'You clicked on me'</span>
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <h2 id="callbacks">Callbacks</h2>
<p>Callbacks are often useful to include in your settings object. Be sure to use the convention <code>onName</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  onChange     : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{},</pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <h3 id="optional">Optional</h3>

            </div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <p>Selectors used by your module</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  selector    : {
    example : <span class="hljs-string">'.example'</span>
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <p>Regular expressions used by your module</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  regExp      : {
    text: <span class="hljs-regexp">/\s\S*/</span>
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <p>Error messages returned by the module</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  error: {
    noText : <span class="hljs-string">'The text you tried to display has not been defined.'</span>,
    method : <span class="hljs-string">'The method you called is not defined.'</span>
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <p>Class names which your module refers to</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  className   : {
    disabled : <span class="hljs-string">'disabled'</span>
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              <p>Metadata attributes stored or retrieved by your module. <code>$(&#39;.foo&#39;).data(&#39;value&#39;);</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  metadata: {
    text: <span class="hljs-string">'text'</span>
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              <h2 id="templates">Templates</h2>
<p>If your module needs to generate html structures, be sure to include them as setting templates
This will allow users of your module to alter the structure.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  templates: {
    text: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(text)</span> </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-string">'&lt;span&gt;'</span> + text + <span class="hljs-string">'&lt;/span&gt;'</span>;
    }
  }

};

})( jQuery, <span class="hljs-built_in">window</span> , <span class="hljs-built_in">document</span> );</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
